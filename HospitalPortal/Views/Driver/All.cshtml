@model IEnumerable<HospitalPortal.Models.ViewModels.DriverDTO>
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    string role = HospitalPortal.Utility.UserIdentity.UserRole;
}


<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="~/js/jquery.doubleScroll.js"></script>
<style>
    #mainContainer {
        width: 99%;
        margin-top: 1%;
        margin-left: 1%;
    }

    .double-scroll {
        width: 100%;
    }
</style>

<div id="mainContainer">
    <div class="row">
        <div class="col-md-6">
            <h3>Drivers</h3>
        </div>
    </div>
    @using (Html.BeginForm("All", "Driver", FormMethod.Get))
    {
        <div class="row">
            <div class="col-md-4">
                <input type="text" class="form-control" id="term" name="term" placeholder="Serach by Name and ID" />
            </div>
            <div class="col-md-3">
                <input type="submit" class="btn btn-primary" value="Search" />
            </div>
            <div class="col-md-3">
                <a href="/Driver/All" class="btn btn-primary">Show All</a>
            </div>
        </div>
    }
    <div class="row">
        <div class="col-md-12">
            <div class="row" style="text-align:center">
                <ul class="pagination">
                    @for (int i = 1; i <= Model.FirstOrDefault().NumberOfPages; i++)
                    {
                        if (Model.FirstOrDefault().Page == i)
                        {
                            <li class="active"><a href="/Driver/All?page=@i">@i</a></li>
                        }
                        else
                        {
                            <li><a href="/Driver/All?page=@i">@i</a></li>
                        }
                    }

                </ul>
            </div>
        </div>
    </div>
</div>

@if (Model.Count() > 0)
 {
    <div class="double-scroll">
        <table class="table table-bordered">
            <thead>
                <tr>
                    
                    <th>Driver Id</th>
                    <th>Name</th>
                    <th>Franchise/Id</th>
                    <th>Vehicle Image</th>
                    <th>MobileNo</th>
                    <th>Email</th>
                    <th>Address</th>
                    <th>Pic</th>
                    <th>DL / No</th>
                    @*<th>DL No</th>*@
                    @*<th>DL Valid Upto</th>*@
                    @*<th>PAN</th>
                    <th>Aadhar</th>*@
                    @*<th>Vehicle Type</th>*@
                    @*<th>Police Verific.</th>*@
                    @if (role == "admin")
                    {
                        <th>Approval</th>
                        <th>Action</th>
                    }
                </tr>
            </thead>
            <tbody>

                @foreach (var item in Model)
                {
                    <tr>

                        <td>@item.DriverId</td>
                        <td>@item.DriverName</td>
                        <td>
                            @if (item.Vendor_Id == 0 || item.Vendor_Id == null)
                            {
                                if (role == "admin")
                                {
                                    <a href="/Admin/ShareToVendor?Id=@item.Id&Role=Driver">Share To Vendor</a>
                                }
                            }
                            else
                            {
                                ;
                                @item.VendorName <span>/ @item.UniqueId</span>
                            }
                        </td>
                        <td>
                            @if (item.DlImage2 != null && item.DlImage3 != null)
                            {
                                <a href="/Images/@item.DlImage2">
                                    <img src="/Images/@item.DlImage2" style="width:100px;height:80px" />
                                </a>
                                <br />
                                <a href="/Images/@item.DlImage2">
                                    <img src="/Images/@item.DlImage3" style="width:100px;height:80px" />
                                </a>
                            }
                            else
                            {
                                <span>No Images</span>
                            }
                        </td>


                        <td>@item.MobileNumber</td>
                        <td>@item.EmailId</td>
                        <td>@item.Location , @item.CityName, @item.StateName</td>
                        <td>
                            @item.DlNumber/
                            <a href="/Images/@item.DlImage">
                                <img src="/Images/@item.DlImage" style="width:100px;height:80px" />
                            </a>

                            @*<a href="/Images/@item.DriverImage">
            <img src="/Images/@item.DriverImage" style="width:100px;height:80px" />
            </a></td>*@
                        <td>
                            @item.DlNumber/
                            @*<a href="/Images/@item.DlImage">
                <img src="/Images/@item.DlImage" style="width:100px;height:80px" />
            </a>*@
                            <br />
                            <a href="/Images/@item.DlImage1">
                                <img src="/Images/@item.DlImage1" style="width:100px;height:80px" />
                            </a>
                        </td>
                        @*<td>@item.DlValidity.ToString("dd-MMM-yyyy")</td>*@
                        @*<td>
            @item.PAN
            @if (string.IsNullOrEmpty(item.AadharImage) && string.IsNullOrEmpty(item.AadharImage2))
            {
                <a href="/Images/@item.PanImage">
                    <img src="/Images/@item.PanImage" style="width:100px; height:80px" />
                </a>
            }
            else
            {
             <text>No Images</text>
            }
        </td>*@
                        @*<td>
                                    @item.AadharNumber
                                    @if (string.IsNullOrEmpty(item.PanImage))
                                    {
                                        <a href="/Images/@item.AadharImage">
                                            <img src="/Images/@item.AadharImage" class="thumb" />
                                        </a>
                                        <a href="/Images/@item.AadharImage2">
                                            <img src="/Images/@item.AadharImage2" class="thumb" />
                                        </a>
                                    }
                                    else
                                    {
                                        <text>No Images</text>
        }
                                </td>*@
                        @*<td>@item.VehicleTypeName</td>*@
                        @*<td>
            @if (item.IsVerifiedByPolice)
            {
                <a href="/Images/@item.VerificationDoc">
                    <img style="width:100px;height:80px" src="/Images/@item.VerificationDoc" />
                </a>
            }
            else
            {
                <span>No Image</span>
            }
        </td>*@
                        @if (role == "admin")
                        {
                            @*<td>
                                @if (item.IsApproved)
                                {
                                    @Html.ActionLink("Dispproved", "UpdateStatus", new { id = item.Id, IsApproved = false }, new { @class = "btn btn-danger" })
                                }
                                else
                                {
                                    @Html.ActionLink("Approved", "UpdateStatus", new { id = item.Id, IsApproved = true }, new { @class = "btn btn-success" })
                                }
                            </td>*@
                            <td>
                @if (item.IsApproved)
                {
                    <a href="/Driver/UpdateStatus?id=@item.Id" class="btn btn-success">Approved</a>
                    @*@Html.ActionLink("Approved", "UpdateStatus", new { id = item.Id }, new { @class = "btn btn-success" })*@
                }
                else
                {
                            <a href="/Driver/UpdateStatus?id=@item.Id" class="btn btn-danger">Not Approve</a>
                }
            </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.Id }, new { onclick = "return confirm('Are sure wants to Edit?');", @class = "btn btn-info" })
                        <br />
                        @*<a href="/Driver/Delete?id=@item.Id" class="btn btn-danger"><i class="fa fa-trash-o"></i></a>*@
                        @Html.ActionLink("Delete", "Delete", new { id = item.Id },
new { onclick = "return confirm('Are sure wants to delete?');", @class = "btn btn-danger" })
                    </td>
                        }
                    </tr>
                }
            </tbody>
        </table>
    </div>

}
else
{
    <span>No Records</span>
}


<script>
    $('.double-scroll').auto();
</script>